# 8255A

* 8255A的内部结构和引脚
  * 3个8位端口
  * 3种工作方式
  * 4个端口地址
  * 2个控制字
    * 方式控制字
    * C口的按位置位/复位字
    * ![image-20250404164411108](E:\study\lianxi\MyLearningDocuments\专升本\images\image-20250404164411108.png)
    * ![image-20250404164422819](E:\study\lianxi\MyLearningDocuments\专升本\images\image-20250404164422819.png)
  * 与外设连接的端口
    * 端口A：PA0~PA7
    * 常做数据端口，功能最强大
    * 支持工作方式0、1、2
    * 端口B：PB0~PB7
    * 常作数据端口，支持工作方式0、1
    * 端口C：PC0~PC7
    * 可做数据、状态和控制端口
    * 分两个4位，每位可独立操作
    * 仅支持工作方式0
  * 与处理器连接的引脚
    * 数据线：8
    * 地址线：2
    * CS*片选信号
    * RD*读信号
    * WR*写信号
    * Reset复位信号
    * 8255四个端口地址
    * ![image-20250404164526640](E:\study\lianxi\MyLearningDocuments\专升本\images\image-20250404164526640.png)
  * 8255A的工作方式
    * 方式0：基本输入输出方式（基本I/O方式）
      * 适用于无条件传送和查询方式的接口电路
      * 通常不用联络信号或不使用固定的联络信号
      * PA、PB和两个4位PC都可以作为数据的入/出（由程序设定）
      * 输入时，使用IN指令
      * 输出时，使用OUT指令
    * 方式1：宣统输入输出方式
      * 适用于查询和中断方式的接口电路
      * 通常使用固定的联络信号
      * 可以产生中断
      * 一般作为中断方式I/O
      * 输入时，使用IN指令
      * 输出时，使用OUT指令
    * 方式2：双向宣统传送方式
      * 适用于查询和中断方式的接口电路
      * 8255A可以无条件方式、查询方式和中断方式完成CPU与外设的数据交换
      * 以无条件方式工作时，端口A、B和C都可以作为数据输入/输出端口
      * 以查询或中断方式工作时，A口与B口可以作为数据输入/输出端口，C扣作为握手联络信号，负责输出控制信息或输入状态信息
    * 方式1 输入联络信号
      * STB*——选通信号，低电平有效
        * 外设提供的信号，有效时，将输入设备送来的数据锁存至8255A的输入锁存器
      * IBF——输入缓冲器满信号，高电平有效
        * 表示数据已送入8255A的输入锁存器，它由ST*STB信号的下降沿置位，由信号的上升沿使其复位
      * INTR——中断请求信号，高电平有效
        * 8255A输出信号，向CPU提出中断请求，要求CPU读取外设数据
      * INTEA：允许端口A输入中断，由PC4控制
      * INTEB：允许B端口输入中断，由PC2控制
      * OBF*——输出缓冲器满信号，低有效
        * 输出给外设，有效时，表示CPU已把数据输出给指定的端，外设可以取走
      * ACK*——响应信号，低电平有效
        * 外设的响应信号，指示8255A的端口数据已由外设接收
    * 方式2：双向方式
      * 只有端口A可以工作于方式2
  * 方式控制字
    * ![image-20250404164724745](E:\study\lianxi\MyLearningDocuments\专升本\images\image-20250404164724745-1743756445779-1.png)
  * C口的置位/复位字
    * ![image-20250404164804307](E:\study\lianxi\MyLearningDocuments\专升本\images\image-20250404164804307.png)
  * 8255A的编程步骤
    * 根据题意明确三个端口的工作方式和方向
    * 确定两个字：方式控制字和置位/复位字
    * 确定4个端口地址：依次A、B、C和控制口
    * 8255的初始化编程：两个字送到控制端口
    * 8255的功能驱动编程