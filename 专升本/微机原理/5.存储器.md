# 存储器

* 存储器分类
  * 按存储器在计算机系统中的作用分类
    * 高速缓冲存储器：cache 速度快，容量小
    * 主存储器：内存
    * 辅助存储器：外存 速度慢，容量大
* 按存取方式分类
  * 随机存储器：RAM
  * 只读存储器：ROM
  * 顺序存储器：SAM 磁性
  * 直接存储器：DAM 硬盘
* 按存储介质分类
  * 半导体存储器
  * 磁表面存储器
  * 光存储器
* 按信息的可保存性分类
  * 易失性存储器：RAM 断电丢失数据
    * 存储器中存取操作与存储单元物理位置的顺序无关
    * SRAM：静态 相对DRAM存取速度快
    * DRAM：动态
  * 非易失性存储器：ROM
    * 破坏性读出：信息读出时，原存储信息会被破坏
    * 非破坏性读出：硬盘
  * 高速缓冲存储器 Cache
    * 功能：协调CPU和内存之间的速度差
    * Cache属于RAM
* 内存
  * 存放当前运行的程序和数据
  * 特点
    * 容量小、速度快、随机存取、cpu可直接访问
      * 容量 = 单元数*每个单元位数
        * 一般单元数就是寻址范围，就是2的地址线次方（几条地址线就是几次方），位数就是数据线的条数
* 外存
  * 存放当前不适用的程序和数据
  * 特点
    * 容量大、速度慢、顺序存取、块存取，需要调入内存后cpu能访问（CPU不能直接访问）
* 半导体存储器分类
  * 微机中的内存一般指随机存储器（RAM）
  * 随机存储器即RAM是指：存储器中存取操作与存储单元物理位置的顺序无关
  * 特性
    * 可读可写，非破坏性读出，写入时覆盖原内容
    * 随机存取，存取任一单元所需的时间相同
    * 易失性，当断电后，在存储器中的内容立即消失
    * 目前常用的内存分为SRAM和DRAM
  * 技术指标
    * 存储容量：通常以允许存放的字数x位数或字节数表示存储器的容量
    * 一般单元数就是寻址范围就是2的地址线次方，位数就是数据线条数
    * 存取周期（又称读写中期或访问周期）
      * 通常指连续存入或取出两个数据所间隔的时间
    * 取数时间
      * 从CPU发出读命令开始，知道存储器获得有效读出信号的一段时间
    * 可靠性
      * 通常以平均无故障工作时间来衡量存储器的可靠性
    * 经济性
      * 常以性能价格比来衡量存储器经济性能的好坏
* SRAM 静态随机存储器 （不用定时刷新）
  * 只要不断电，就不全丢失信息
  * 相对DRAM，存取速度更快
  * 由触发器构成，集成度低，功耗大，造价成本高
  * 一般用作高速缓冲存储器
  * ![image-20250402155455392](E:\study\lianxi\MyLearningDocuments\images\image-20250402155455392.png)
* DRAM 动态随机存储器（需要定时刷新）
  * 相对于SRAM，存取速度慢
  * 由电容构成，集成度高，功耗小，成本低
  * 适合制作大规模和大容量的内存
  * 由于电容漏电，数据不能长久保存，需要专门的动态刷新电路，定期给电容补充电荷，即刷新
  * ![image-20250402155528918](E:\study\lianxi\MyLearningDocuments\images\image-20250402155528918.png)
* ROM
  * 一般用于存放系统程序BIOS和用于微系统控制
  * 可编程的只读存储器 PROM
  * 可擦除可编程的只读存储器EPROM
    * 用紫外线擦除原有信息
    * 一般用专门的编程器（烧写器）编程
    * 编程后，贴上不透光封条
    * 为编写前，每个基本存储单元都是信息1，编写就是将某些单元写入信息0
    * ![image-20250402155610988](E:\study\lianxi\MyLearningDocuments\images\image-20250402155610988.png)
    * 电可擦除可编程的只读存储器 EEPROM
    * 闪速存储器 FLASH
      * 电可擦除可写入，断电之后存储的数据依旧不会消失，以块为单位进行擦除操作为编程前，每个基本存储单元都是信息1编程就是将某些单元写入信息0
* 外存储器
  * 软盘
    * 磁性物质
    * 容量1.44MB
    * 写保护
  * 硬盘
    * 涂磁性材料的金属盘片
    * 最常见的外存储器
    * 目前存取速度最快的外存
  * u盘
    * 通过USB接口与电脑连接
    * 即插即用
  * 光盘
    * 只读光盘 CD-ROM
    * 追记性光盘 CD-R
    * 可改写型光盘 CD-RW
* 主存的结构
  * 为什么采用分体结构
    * 存储体以八位为基本存储单位
    * 访问一个字节时，只用十六位数据线的八位
    * 访问一个字时，十六位数据线的高八位和第八位同时进行
    * 访问两个存储单元，提高了cpu的效率
  * 如何划分奇偶体
    * 在86系统中，将容量为1MB的存储器分为奇地址存储体和偶地址存储体各位512KB
    * 奇体与高八位（D15~D8）相联
    * 偶体与低八位（D0~D7）相联
    * 选择奇体还是偶体由信号BHE*、A0决定
      * BHE*=0、A0=1 选择奇体
      * BHE*=1、A0=0 选择偶体
      * ![image-20250402155816404](E:\study\lianxi\MyLearningDocuments\images\image-20250402155816404.png)
      * 规则字 从偶地址开始取字
      * 非规则字：从奇地址开始取字
* 主存的容量
  * 位
    * 也称为比特，简记为b，是计算机存储数据的最小单位
    * b表示一个二进制位0或1两种状态
  * 字节B 1B=8b
    * 字节时存储信息的基本单位
  * 字  1字=2B
    * 字通常取字节的整数倍
  * 存储元：是一个二级制位，一个触发器对应一个存储元
  * 存储单元：一字节
  * 存储体：存储单元的集合
  * 主存=存储体+地址译码器+片选信号+读写控制逻辑
  * 末地址-首地址+1=空间大小
  * 空间大小+首地址-1=末地址
  * 段首地址必须从小节开始
    * 小节：每小节为十六个字节为xxxx0H
* 半导体存储器与CPU的连接
  * 原则
    * CPU的三种系统总线依次对应主存的三种总线
    * 8088为8位数据线D0~D7连接，连接主存芯片的8位数据线
    * 8086为16位数据线D0~D15连接，连接主存芯片的16位数据线
    * CPU为20位地址线（A0~A19）
      * 片内地址线，CPU最低地址线连接主存芯片地址线
      * 中位地址线进入地址译码器
      * 高位地址线看情况进入地址译码器或不用
    * 控制线
      * 控制总线（CB）：读写：IO/M
    * 存储芯片的读写控制
      * 芯片OE*与系统的读（RD\*），命令线相连
      * 芯片WR*与系统的写（WE\*）命令线相连
    * 数据线的连接方法：当CPU选择8088时，DB为8位
      * 若芯片的数据线正好8根
      * 若不足8跟则进行位扩充
      * 列如：1kx4→1kx8   需要1组两片
      * ![image-20250402160340453](E:\study\lianxi\MyLearningDocuments\images\image-20250402160340453.png)
      * 列如：1kx8→2kx8
* 译码方式
  * 全译码
    * cpu的地址线均用上，使得存储器芯片的每一个单元都占据一个唯一的地址
    * 片内：低位AB直接进入芯片内
    * 片选：高位AB进行译码寻址
    * 每个存储单元的地址都是唯一的，不存在地址重复
  * 部分译码
    * cpu的20位地址线只用了一部分
    * n条地址线，确实2的n次方地址范围
    * 高位地址线只有部分参与译码，部分没用
    * 每个存储单元将对应多个地址
    * 系统的部分地址空间被浪费
  * 线选法
    * cpu直接访问的芯片比较少直接用地址线片选存储芯片
    * 只用少数几根高位地址线进行芯片的译码构成简单，但地址空间严重浪费
    * 出现地址重复
    * 一个存储地址会对应多个存储单元
    * ![image-20250402160443556](E:\study\lianxi\MyLearningDocuments\images\image-20250402160443556.png)
  * 主存与CPU连接举例：连接画图步骤
    * 确定CPU系统的类型、字长、总线的条数、种类
    * 确定主存的单片芯片的类型、容量、和引脚
    * 确定主存的总容量或地址范围
    * 计算组数（字扩展）或没组片数（位扩展）
    * 选择译码方式和译码器
    * 画图