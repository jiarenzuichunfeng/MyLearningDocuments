# 伪指令（指示性）语句

## 数据定义语句DB、DW、DD

* 格式：[变量名] DB/DW/DD 参数1，参数2，---
* 功能：为数据分配存储单元
  用符号名与存储单元相联系
* DB
  * 定义字节，为其后每个操作数分配一个字节存储单元
* DW
  * 定义字，为其后每个操作数分配一个字存储单元
* DD
  * 定义双字，为其后每个操作数分配一个双字存储单元

## EQU等值语句

* 格式：符号名 EQU 表达式
* 功能：用符号名取代后边的表达式

## 段定义语句 SEGMENT……ENDS，ASSUME，ORG

### 分段伪指令：SEGMENT---ENDS

* 格式：段名 SEGMENT[定位类型] [组合类型] [类别]
  

  ​	段名   ENDS

### 设定伪指令：ASSUME

* 格式：ASSUME 段寄存器名：段名，...
* 功能：说明所定义逻辑段的性质

### 开始伪指令：ORG

* 格式：ORG 表达式
* 功能：设定起始偏移地址

## 过程定义伪指令

* 格式：过程名 PROC [NEAR/FAR]

  ​	RET
  ​	过程名 ENDP

* 功能：用于定义一个过程体

* 调用： CALL 过程名

  * 段内直接调用
    * CALL NRAR PTR 子程序名
  * 段内间接调用
    * CALL BX
    * CALL WORD PTR 【SI】
  * 段间直接调用
    * CALL FAR PTR 子程序名
  * 段间间接调用
    * CALL DWORD PTR 【DI】

* CALL 指令指行过程

  * 将返回地址（断点）进栈保存
    * 段内调用：IP 堆栈
    * 段间调用：CS，IP 堆栈
  * 转到子程序入口处执行
    * 段内：子程序入口地址偏移地址-》IP
    * 段间：子程序入口段地址-》CS，偏移地址-》IP

* 子程序返回指令RET

  * 格式：RET 【n】
    * RET放在子程序末尾，返回主程序断点处继续执行
  * 功能：将当前栈顶内容出栈
    * 段内调用：弹出2个字节-》IP
    * 段间调用：弹出4个字节-》IP，CS

* 子程序现场保护和现场恢复

  * PUSH，POP堆栈
  * 送到指定内存单元（用MOV实现）

* 子程序参数传递

  * 参数传递：主程序传送输入参数给子程序；子程序传送输出参数给主程序
  * 寄存器传送：方法简单，参数少的情况
  * 堆栈传递：适合参数较多情况，避免破坏断点
  * 内存单元传递：适合参数较多情况

###  地址计数器-$：汇编时使用的地址计数器，保存当前正在汇编指令的地址。汇编语言允许用户引用地址计数器当前值。

## 结束伪指令

* 格式：END [标号]

* 功能：汇编结束

