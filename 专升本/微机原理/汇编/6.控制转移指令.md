# 控制转移指令

## 无条件转移指令（JMP）

* 转移指令的操作数是转移地址。转移指令的各种寻址方式就是获得转移地址。指令把获得的：有效地址->IP寄存器，段地址->CS段寄存器，使程序从新的地址开始执行
* ![image-20250317140534839](E:\study\lianxi\MyLearningDocuments\images\image-20250317140534839.png)

### 段内直接短转移

* 格式：JMP SHORT OPR；OPR是标号
* 操作：IP<-当前IP+指令中8位偏移量；CS内容不变
* SHORT为属性操作符，表明指令代码中的操作数是8为偏移量并用补码表示，他只能在-128至+127即80H--7FH范围内取值
* 当前IP：转移指令下一条指令的首地址

### 段内直接近转移

* 格式：JMP NEAR PTR OPR；OPR是标号
* 操作：IP<-当前IP+指令中16位偏移量；CS内容不变
* NEAR PTR属性操作符，说明偏移量是16位的二进制补码，除偏移量位数不同之外，近转移和短转移一样，也采用相对寻址（即相对当前IP值），偏移量的取值范围为：-32768至+32767（即8000H--7FFFH）。由于偏移量是16位，所以它可以转移到段内任意一个位置；短转移，偏移量8位，只能在一页内转移。
* 近转移和短转移的属性操作符，在指令中可不写出，直接可写成 **JMP OPR**，究竟偏移量是8位还是16位，由汇编程序在汇编过程中，根据**OPR**标号所处地址和JMP指令所处地址计算得到。

### 段内间接转移

* 段内间接转移：转移地址的有效地址IP是一个寄存器的值或存储单元内容。CS内容不变

### 段间直接转移

* 段间直接转移：指令中直接提供转移地址的段地址和偏移地址。
  偏移地址->IP,段地址->CS
* 格式：JMP FAR PTR OPR；OPR是标号
* 占五个存储单元

### 段间间接转移

* 段间间接转移：用存储器两个相继字（4个字节单元）的内容，取代IP和CS寄存器的值

## 条件转移指令

* 格式：指令助记符 标号
* 说明：条件转移指令只能是段内直接短跳转
* CF：最高位有没有进位
* ZF：结果是否为零
* SF：若运算结果最高位为1，则SF=1否则SF=0
* OF：若运算结果有溢出，则OF=1否则OF=0；溢出：符号位从1变0或0变1
* PF：当运算结果最低字节中1的个数为零或偶数时，PF=1否则PF=0
* AF：低四位是否有进位或借位，AF=1否则AF=0

### 单个标志位判断转移指令

* CF

  * 1 JC
  * 0 JNC

  ZF

  * 1 JZ
  * 0 JNZ

  SF

  * 1 JS
  * 0 JNS

* OF

  * 1 JO
  * 0 JNO

* PF

  * 1 JP
  * 0 JNP

### 无符号数比较，转移指令

* 无符号数比较（CMP X，Y），根据比较结果转移指令：
* ![image-20250320131007557](E:\study\lianxi\MyLearningDocuments\images\image-20250320131007557.png)

### 符号数比较，转移指令

* 符号数比较（CMP X，Y），根据比较结果转移指令：
* ![image-20250320131048834](E:\study\lianxi\MyLearningDocuments\images\image-20250320131048834.png)
