# 算术运算指令

* 说明：
  * 算术运算指令涉及两种类型的数据：无符号数和符号数
  * 对于加减运算：无符号数和符号数采用同一套指令，只是判断溢出方法不同，CF=1表示无符号数运算产生溢出；OF=1表示符号数运算产生溢出
  * 对于乘除运算：不能用一套指令，有各自的乘除运算指令。
  * 算术运算指令影响标志位

## 加法指令

* CF：最高位有没有进位
* ZF：结果是否为零
* SF：若运算结果最高位为1，则SF=1否则SF=0
* OF：若运算结果有溢出，则OF=1否则OF=0
* PF：当运算结果最低字节中1的个数为零或偶数时，PF=1否则PF=0
* AF：低四位是否有进位或借位，AF=1否则AF=0

### 不带进位的加法指令（ADD）

* 格式：ADD DST，SRC；B/W
* 操作：（DST）<-DST+SRC
* 注意：
  * 源操作数可以是8位或16位通用寄存器、存储器操作数或立即数；目的操作数不允许为立即数；且不允许两者都为存储器操作数
  * ADD指令的执行对六个状态标志位都产生影响

### 带进位的加法指令（ADC）

* 格式：ADC DST，SRC；B/W
* 操作：（DST）<-DST+SRC+CF
* 该指令的操作过程与ADD指令基本相同，唯一不同的是进位标志位的CF一起参与加法运算，待运算结束后，CF将重新根据结果置成新的状态。、

### 加一指令（INC）

* 格式：INC OPR；B/W
* 操作：（OPR）<- (OPR)+1
* 注意：OPR不能是立即数和段寄存器内容



## 减法指令

### 不带借位的减法指令（SUB）

* 格式：SUB DST，SRC；B/W
* 操作：（DST）<-（DST）-（SRC）
* 注意：
  * 源操作数可以是8或16位通用寄存器，存储器操作数或是立即数；
    目的操作数不允许为立即数；且允许两者都为存储器操作数。
  * SUB指令的执行对六个状态标志位都产生影响

### 带借位的减法指令（SBB）

* 格式：SBB DST，SRC；B/W
* 操作：（DST）<-（DST）-（SRC）
* 本指令与SUB指令功能、操作过程基本相同，唯一不同的是完成减法操作时必须减去进位标志位CF。若运算结束时，CF经被置成新状态

### 减一指令（DEC）

* 格式：DEC OPR;B/W
* 操作：（OPR）<-(OPR)-1
* 此程序段通常用于循序程序中修改指针和循序次数
* 注意：OPR不能是立即数和段寄存器内容

### 比较指令（CMP）

* 格式：CMP OPR1，OPR2；B/W
* 操作：（OPR1）-（OPR2）
* 此指令不保留结果（差），即指令执行后，两个操作数原内容不会改变，主要用于影响标志位
  * 若两个操作数相等，ZF=1
  * 若两个操作数不相等
    * 两个无符号数比较
      * CF=0   A>B
      * CF=1   A<B
    * 两个符号数比较
      * OF(+)CF=0   A>B
      * OF(+)CF=1   A<B

## 乘法指令

### 无符号数乘法指令（MUL）

* 格式：MUL SRC；B/W
* 操作：
  * 字节操作：AX（16位）<-AL*(SRC)
  * 字操作：DX（高16位）、AX（低16位）<-AX*(SRC)
  * 目的操作数DST必须是累加器（AX或AL）。源操作数SRC不能是立即数和段寄存器
  * 注意：SRC为存储器操作数时，不许用属性操作数BYTE PTR 或WORD PTR说明是字节操作，还是字操作

###  符号数乘法指令（IMUL）

* 格式：IMUL SRC；B/W
* 操作（操作数均为符号数）：
  * 字节操作数：AX（16位）<-AL*(SRC)
  * 字操作：DX（高16位）、AX（低16位）<-AX*(SRC)
  * 目的操作数DST必须是累加器（AX或AL）。源操作数SRC不能是立即数和段寄存器

## 除法指令

### 无符号数除法指令（DIV）

* 格式：DIV SRC；B/W
* 操作：
  * 字节操作：16位被除数在AX中，8位除数为源操作数，结果8位商在AL中，8位余数在AH中，表示为
    AL<-AX/(SRC) 商
    AH<-AX/(SRC) 余数
  * 字操作：32位被除数在AX和DX中，其中DX为高位字，16位除数为源操作数，结果的16位商在AX中，16位余数在DX中，表示为：
    AX<-DX、AX/(SRC) 商
    DX<-DX、AX/(SRC) 余数
  * 注意：SRC的规定与MUL指令相同。DIV指令的被除数、除数、商和余数全为无符号数

### 有符号数除法指令（IDIV）

* 格式：IDIV SRC；B/W
* 操作：
  * 字节操作：16位被除数在AX中，8位除数为源操作数，结果8位商在AL中，8位余数在AH中，表示为
    AL<-AX/(SRC) 商
    AH<-AX/(SRC) 余数
  * 字操作：32位被除数在AX和DX中，其中DX为高位字，16位除数为源操作数，结果的16位商在AX中，16位余数在DX中，表示为：
    AX<-DX、AX/(SRC) 商
    DX<-DX、AX/(SRC) 余数
  * 注意：SRC的规定与MUL指令相同。IDIV指令的被除数、除数、商和余数全为符号数，且余数符号与被除数符号相同

### 字节/字扩展指令（CBW，CWD）

#### 字节转换为字指令（CBW）

* 格式：CBW
* 操作：AL中的符号位（最高位D7）扩展到8位AH中，若AL中的D7=0，则AH=00H；若AL中的D7=1，则AH=FFH

#### 字转换为双字指令（CWD）

* 格式：CWD
* 操作：AX中的符号位（最高位D15）扩展到16位DX中，若AX中的D15=0，则DX=0000H；若AX中的D15=1，则DX=FFFFH

### BCD码调整指令（DAA，DAS）

#### 压缩BCD码加法调整指令（DAA）

* 格式：DAA；B
* 操作：在ADD，ADC之后，对AL内容进行调整

#### 压缩BCD码减法调整指令（DAS）

* 格式：DAS；B
* 操作：在SUB、SBB之后，对AL内容进行调整

##### 多字节十进制加法：DAA和DAS只能对AL中的结果进行调整，多个字节的十进制加法，只能从低位字节开始，逐个字节进行运算调整

