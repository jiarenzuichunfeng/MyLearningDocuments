# 数据传送指令

## 通用传送指令——传送指令（MOV）

* 格式： MOV DST，SRC；B（字节）/W（字）
* 操作：（SRC）->（DST）
  * 其中DST为目的操作数，SRC为源操作数。把一个字节或一个字操作数从源传送到目的，源操作数内容不变，目的操作数内容与源操作数内容相同。

* 注意：
  * 两操作数字长必须相同
  * 两操作数不允许同时为存储器操作数
  * 两操作数不允许同时为段寄存器
  * 在源操作数是立即数时，目的操作数不能是段寄存器
  * IP和CS不作为目的操作数
  * 8位立即数可以送字节单元也可以送字单元，必须指明要送那个单元，BYTE PTR \ WORD PTR

## 通用传送指令——堆栈指令（PUSH，POP）

* 堆栈：
  * 是在存储器（内存）开辟的一个特殊区域，以**先进后出**原则进行数据操作
  * 8086堆栈是从高地址向低地址方向生长的
  * 堆栈指针寄存器SP，任何时候都指向当前的栈顶
  * 用途：子程序调用、中断时存放断点及现场保护等

### 入栈指令

* 格式：PUSH SRC；W
* 操作：
  * 把操作数SRC（高位字节先入栈、低位字节后入栈）送入以SP指出的（SP-1）、（SP-2）单元中
  * SP指针的内容随之减2，SP<-SP-2
  * 注意：SRC为入栈的字操作数，不能是立即数

### 出栈指令

* 格式：POP DST；W
* 操作：
  * 把SP、SP+1两个栈顶的内容（SP为低字节，SP+1为高字节）送入DST
  * SP指针的内容随之加2
  * 注意：DST为出栈的目的地址，不能是立即数和CS段寄存器

## 通用传送指令——交换指令（XCHG）

* 格式：XCHG OPR1，OPR2；B/W
* 操作：
  * （OPR1）<=>(OPR2)
  * 该指令必须有一个操作数在寄存器中，但不能与段寄存器交换数据。存储器之间也不能交换数据，该指令结果不影响标志位

## 通用传送指令——换码指令（XLAT）

* 格式：XLAT ； B
* 操作：
  * [BX+AL]->AL
  * BX：指向表的首地址
  * AL：表中某一项与表格首地址之间的偏移量

# 地址传送指令

## 地址传送指令——有效地址送寄存器指令（LEA）

* 格式：LEA REG，SRC
* 执行操作：REG,-EA(SRC)
* 该指令的功能是将源操作数SRC的有效地址送到指定的寄存器中。SRC是存储器操作数，寄存器、立即数和段寄存器都不能用作源操作数SRC；REG只能使用规定的16位寄存器，不能使用段寄存器。

## I/O传送指令——直接输入/输出指令（IN/OUT）

### 直接输入指令IN

* 格式：IN AL（或AX），PORT（端口）
* 操作
  * AL <-(PORT)
  * AH<-(PORT)
  * AX<-(PORT)

### 直接输出指令OUT

* 格式：OUT PORT，AL（或AX）
* 操作
  * (PORT)<-AL 
  * (PORT)<-AH
  * (PORT)<-AX

**当外部端口地址为16位时，必须使用寄存器间接寻址，端口地址先送至DX中**

### 间接输入指令IN

* 格式：IN AL（或AX），DX
* 操作
  * AL <-(DX)
  * AH<-(DX)
  * AX<-(DX)

### 间接输出指令OUT

* 格式：OUT DX，AL（或AX）
* 操作
  * (DX)<-AL 
  * (DX)<-AH
  * (DX)<-AX

# 算术运算指令

* 说明：
  * 算术运算指令涉及两种类型的数据：无符号数和符号数
  * 对于加减运算：无符号数和符号数采用同一套指令，只是判断溢出方法不同，CF=1表示无符号数运算产生溢出；OF=1表示符号数运算产生溢出
  * 对于乘除运算：不能用一套指令，有各自的乘除运算指令。
  * 算术运算指令影响标志位

## 加法指令

* CF：最高位有没有进位
* ZF：结果是否为零
* SF：若运算结果最高位为1，则SF=1否则SF=0
* OF：若运算结果有溢出，则OF=1否则OF=0
* PF：当运算结果最低字节中1的个数为零或偶数时，PF=1否则PF=0
* AF：低四位是否有进位或借位，AF=1否则AF=0

### 不带进位的加法指令（ADD）

* 格式：ADD DST，SRC；B/W
* 操作：（DST）<-DST+SRC
* 注意：
  * 源操作数可以是8位或16位通用寄存器、存储器操作数或立即数；目的操作数不允许为立即数；且不允许两者都为存储器操作数
  * ADD指令的执行对六个状态标志位都产生影响

### 带进位的加法指令（ADC）

* 格式：ADC DST，SRC；B/W
* 操作：（DST）<-DST+SRC+CF
* 该指令的操作过程与ADD指令基本相同，唯一不同的是进位标志位的CF一起参与加法运算，待运算结束后，CF将重新根据结果置成新的状态。、

### 加一指令（）



## 减法指令

### 不带借位的减法指令（SUB）

* 格式：SUB DST，SRC；B/W
* 操作：（DST）<-（DST）-（SRC）
* 注意：
  * 源操作数可以是8或16位通用寄存器，存储器操作数或是立即数；
    目的操作数不允许为立即数；且允许两者都为存储器操作数。
  * SUB指令的执行对六个状态标志位都产生影响

### 带借位的减法指令（SBB）

* 格式：SBB DST，SRC；B/W
* 操作：（DST）<-（DST）-（SRC）
* 本指令与SUB指令功能、操作过程基本相同，唯一不同的是完成减法操作时必须减去进位标志位CF。若运算结束时，CF经被置成新状态

### 减一指令（DEC）

* 格式：DEC OPR;B/W
* 操作：（OPR）<-(OPR)-1
* 此程序段通常用于循序程序中修改指针和循序次数
* 注意：OPR不能是立即数和段寄存器内容

### 比较指令（CMP）

* 格式：CMP OPR1，OPR2；B/W
* 操作：（OPR1）-（OPR2）
* 此指令不保留结果（差），即指令执行后，两个操作数原内容不会改变，主要用于影响标志位
  * 若两个操作数相等，ZF=1
  * 若两个操作数不相等
    * 两个无符号数比较
      * CF=0   A>B
      * CF=1   A<B
    * 两个符号数比较
      * OF(+)CF=0   A>B
      * OF(+)CF=1   A<B
